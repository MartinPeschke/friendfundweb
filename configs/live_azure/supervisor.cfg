[supervisord]
logfile = %(here)s/logs/supervisor.log
loglevel = info
pidfile = %(here)s/run/supervisord.pid
directory = %(here)s/code

[unix_http_server]
file = %(here)s/run/supervisord.sock
chown = www-data:www-data
chmod = 0770

[supervisorctl]
serverurl = unix:///%(here)s/run/supervisord.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface


[program:p1]
command = %(here)s/env/bin/paster serve  --server-name=web_01_%(process_num)02d %(here)s/code/paster.ini
process_name = %(program_name)s-web_01_%(process_num)02d
numprocs=3
autostart = true
startretries=10
autorestart=true
startsecs = 5
user = www-data
redirect_stderr = true
stdout_logfile = %(here)s/logs/python_01_%(process_num)02d.log
environment=PYTHONPATH=%(here)s/code/current


[program:p2]
command = %(here)s/env/bin/paster serve  --server-name=web_01_%(process_num)02d %(here)s/code/paster.ini
process_name = %(program_name)s-web_01_%(process_num)02d
numprocs=3
autostart = true
startretries=10
autorestart=true
startsecs = 5
user = www-data
redirect_stderr = true
stdout_logfile = %(here)s/logs/python_01_%(process_num)02d.log
environment=PYTHONPATH=%(here)s/code/current




[program:notifier]
command = %(here)s/env/bin/python %(here)s/code/current/friendfund/tasks/notifier.py -f %(here)s/code/paster.ini
process_name = %(program_name)s
autostart = true
startretries=10
autorestart=true
startsecs = 5
user = www-data
redirect_stderr = true
stdout_logfile = %(here)s/logs/notification.log
environment=PYTHONPATH=%(here)s/code/current

[program:payment]
command = %(here)s/env/bin/python %(here)s/code/current/friendfund/tasks/payment_job.py -f %(here)s/code/paster.ini
process_name = %(program_name)s
autostart = true
startretries=1
autorestart=false
startsecs = 5
user = www-data
redirect_stderr = true
stdout_logfile = %(here)s/logs/payment_job.log
environment=PYTHONPATH=%(here)s/code/current

[program:cm]
command = %(here)s/env/bin/python %(here)s/code/current/friendfund/tasks/cache_refresher.py -f %(here)s/code/paster.ini
process_name = %(program_name)s
autostart = true
startretries=50
autorestart=true
startsecs = 5
user = www-data
redirect_stderr = true
stdout_logfile = %(here)s/logs/cache.log
environment=PYTHONPATH=%(here)s/code/current