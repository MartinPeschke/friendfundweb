<%inherit file="layout_layer.html"/>
<%namespace name="links" file="links.html"/>
<%namespace name="html" file="widgets/html_elems.html"/>
<%namespace name="forms" file="widgets/forms.html"/>
<%namespace name="ra_stream" file="widgets/ra_stream.html"/>
<%def name="title()">${_("PAGE_INDEX_TITLE_Welcome")}</%def>

<%def name="scripts()">
	<script type="text/javascript">
		page_reloader = function(){console.log('reloading')};
		dojo.query(".frontpagebutton.enabled", "pool_configurator").forEach(
			function(elem, pos, array){
				dojo.connect(elem, "onmouseenter", function(evt){dojo.addClass(this, "frontpagebuttonhover")});
				dojo.connect(elem, "onmouseleave", function(evt){dojo.removeClass(this, "frontpagebuttonhover")});
		});
	</script>
	${links.js('friendfund/HomePagePanel.js')}
	${links.js('friendfund/FriendSelector.js')}
	${links.js('friendfund/ProductSearch.js')}
</%def>

<%def name="header()"></%def>
<%def name="page_slogan()">
	<h4 class="inside">
		Share the costs with your friends!
	</h4>
	<div class="insider underlined5" style="margin:0 5px;">Share the costs with your friends by organising a group gift pool.</div>
	</%def>
<%def name="bodyclass()">popup</%def>
<%def name="render_account_panel()"></%def>
<%def name="user_voice()"></%def>
<%def name="render_siteinfo_copyright()">
	<div class="siteinfo_copyright light"><p>${_(u"powered by <span class=\"poweredByFriendfund\"></span>")|n}</p></div>
</%def>


<%def name="onloadscripts()">
		<% 
			pool = getattr(c, "pool", None) 
			receiver = str(getattr(pool, "receiver", None) is not None).lower()
			occasion = str(getattr(pool, "occasion", None) is not None).lower()
			product = str(getattr(pool, "product", None) is not None).lower()
		%>
		panels = new friendfund.HomePagePanel({
						ref_node : "button_panel_container"
						, config_node: "pool_configurator"
						, fb_api_key : "${app_globals.FbApiKey}"
						, window : window.parent
						, scrolling : false
						, auto_extend : "receiver"
						, auto_suggest : false
						, selected_elems : {receiver:${receiver}, occasion:${occasion}, product:${product}}});
</%def>



<form action="${url(controller='pool', action='create')}" method="POST" id="pool_configurator_form" onsubmit="panels.verify()">
	<div id="pool_configurator">
		<div id="product_panel" _type="product" class="frontpagebutton first">
			<%include file="product/button.html"/>
		</div>
		
		<div class="smallInside">Complete the last Steps below</div>
		<div style="clear:both;height:5px;"></div>
		<div id="receiver_panel" _type="receiver" class="frontpagebutton second enabled">
			<%include file="receiver/button.html"/>
		</div>

		<div id="occasion_panel" _type="occasion" class="frontpagebutton enabled">
			<%include file="occasion/button.html"/>
		</div>

		<div id="funders_panel" class="floaterLeft last">
			<div class="hpbutton funders">
				<span id="funders_panel_tooltip" class="hidden">${_(u"PAGE_INDEX_MESSAGE_Please select Who, When and What first!")}</span>
				<a id="funders_button" class="red_labeled_container funders inactive">
					<span>${_("PAGE_INDEX_BUTTON_Invite Friends")}</span>
                </a>
			</div>
		</div>
		${html.clearline()|n}
		<div id="button_panel_container">&nbsp;</div>
	</div>
</form>

