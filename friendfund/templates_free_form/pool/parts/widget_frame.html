<%namespace name="links" file="/widgets/links.html"/>
<html>
<head>

<style type="text/css">
body {
    color: #333333;
    font: 12px/18px Arial,Helvetica,sans-serif;
    height: 100%;
    margin: 0;
    vertical-align: baseline;
    width: 100%;
    background: white;
}
a{ text-decoration: none}
div.homebox {
	width: auto;
	float: none;
	border: 1px solid #d7d7d7;
	padding: 9px 9px 0;
	margin: 0
}
div.homebox h5 {
    display: block;
    font-size: 13px;
    margin: 9px auto 0;
}
div.homebox span {
    color: #B3B3B3;
    font-size: 10px;
    line-height: 12px;
    padding: 0 0 5px;
}
span.homebox {
    border-bottom: 1px solid #E7E7E7;
    display: block;
    margin: 0 auto;
}
div.timeCounter {
    display: block;
    margin: 10px auto 0;
    padding: 0;
    position: relative;
    width: 100%;
}
.homebox div.timeCounter span {
    color: #4E4E4E;
    display: block;
    font-size: 11px;
    font-weight: bold;
    left: 50%;
    line-height: 16px;
    margin-left: -29px;
    padding: 0;
    position: absolute;
    text-align: center;
    top: 0;
    width: 70px;
}
div.timeCounterRight {
    -moz-border-radius: 10px 10px 10px 10px;
    background: none repeat scroll 0 0 #ADADAD;
    height: 10px;
    padding: 3px;
    border-top-right-radius:10px;
	border-bottom-right-radius:10px;
	border-top-left-radius:10px;
	border-bottom-left-radius:10px;
}
div.timeCounterLeft {
    -moz-border-radius: 10px 10px 10px 10px;
    border-top-right-radius:10px;
	border-bottom-right-radius:10px;
	border-top-left-radius:10px;
	border-bottom-left-radius:10px;
    background: none repeat scroll 0 0 #A3F46C;
    height: 10px;
}
div.boxContributors {
    -moz-box-shadow: 0px 1px #d7d7d7;
	-webkit-box-shadow: 0px 1px #d7d7d7;
	box-shadow: 0 1px #d7d7d7;
    background: none repeat scroll 0 0 #F1C8FE;
    clear: both;
    margin: 10px -9px 0;
    padding: 0 7px;
    text-align: center;
}
div.boxContributors span {
    color: black;
    font-size: 10px;
}
div.boxContributors span.middot {
    font-size: 13px;
    font-weight: bold;
}
div.fbHolder {
    background: none repeat scroll 0 0 #EBEBEB;
    margin: 1px -9px 0;
    padding: 1px 0 9px 10px;
}
.popupBtnCont {
	border: 1px solid #D7D7D7;
	border-top:none;
	padding: 20px 0;
	text-align: center
}

.clear {
    clear: both;
}
.tertiary {
	height: 60px;
	display: block;
	font-size: 24px;
	border:1px solid #77ad47;
	text-align: center;
	line-height: 60px;
	color:white;
	margin: 0 20px;
	background: -moz-linear-gradient(100% 100% 90deg, #5dc63e, #6eec4a);
	background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#6eec4a), to(#5dc63e));
	background-color: #65da44; /* needs to be last, otherwise IE breaks*/
	-moz-border-radius:5px;
	-webkit-border-radius: 5px;
	text-shadow: 0px 1px 1px #529e0c;
}
.tertiary:hover {
	background:#5dc53d;
	text-decoration: none
}
div.homebox img {
    display: block;
}
div.fbHolder img {
    float: left;
    height: 30px;
    margin-right: 8px;
    margin-top: 8px;
    width: 30px;
}


</style>


</head>
<body>
<div class="widget">
<div class="homebox">
	<% locals = {"closing_date":h.format_date(c.pool.expiry_date, format="full"),
		"admin_name":c.pool.admin.name,
		"total_amount":c.pool.get_display_amount(),
		"days_left":c.pool.get_remaining_days_tuple()[0],
		"no_contributors":c.pool.total_contributors
		}
	%>


	<h5>${c.pool.title}</h5>
	<span class="homebox">${_("FF_HOMEPAGE_BOXES_created by %(admin_name)s")%locals}</span>
	<div class="timeCounter">
		<% progress = int(c.pool.funding_progress()*100) %>
		<span>
		%if c.pool.is_closed():
			${_("FF_MYPOOLS_SUCCESFUL")}
		%else:
			${progress}%
		%endif
		</span>
		<!-- <div style="width: 100%" class="timeCounterRight"> 
			remove 100% widht cos this div has also padding
			the right code is underneath
			The div inside "timeCounterLeft" works normally with the %
		-->
		
		<div class="timeCounterRight">
			<div style="width: ${c.pool.funding_progress()*100}%" class="timeCounterLeft ${c.pool.is_closed() and "green" or ""}"></div>
		</div>
	</div>
	
	<div class="boxContributors">
		<span class="upper"><strong>${locals['no_contributors']}</strong> ${_(u"FF_POOL_PAGE_HEADER_contributors")}</span>
		<span class="middot"> &middot; </span>
		<span class="upper"><strong>${locals['days_left']}</strong> ${_(u"FF_POOL_PAGE_HEADER_Days left")}</span>
	</div>
	<div class="fbHolder">
		
		%for pu in c.pool.get_random_n_invitees(5):
			<img src="${pu.get_profile_pic("PROFILE_S")}" alt="${pu.name}" height="30px" width="30px"/>
		%endfor
		<div class="clear"></div>
	</div>
</div>
<div class="popupBtnCont">
	<a class="btnChipIn tertiary" target="_blank" href="${url("get_pool", pool_url=c.pool.p_url)}">${_("FF_WIDGET_POPUP_Chip In")}</a>
</div>
<div class="clear"></div>
</div>
</body>
</html>