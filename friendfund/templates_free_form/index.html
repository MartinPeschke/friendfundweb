<%inherit file="layout.html"/>
<%namespace name="testimonials" file="widgets/testimonials.html" />
<%namespace name="widgets" file="widgets/widgets.html" />
<%namespace name="links" file="/widgets/links.html"/>
<%def name="onloadscripts()">
	parseDefaultsInputs("poolProductFinder");
	parseSelectables("poolProductFinder", "showToolTipHook", "showToolTip");
	connectURLParser("submissionform", "home_title", true);
	sliderF("merchantslider", 4);
</%def>
<%def name="render_page_state()">window.pageState.fwd = function(login){window.location.href="${url(controller="mypools", action="stream")}";};</%def>


<div class="wrapSubHeaderHome">
	<div class="subHeader">
		<h2><p>${_("FF_HOMEPAGE_SLOGAN_friendfund it.")}</p><span>${_("FF_HOMEPAGE_SLOGAN_Collect money by creating a pool and inviting friends to chip in.")}</span>
			<a href="${url("short_content", lang=session["lang"], action="tips", host=app_globals.default_host)}" class="learnMoreBtn">${_("FF_HOMEPAGE_SLOGAN_Learn more")}</a>
		</h2>
	</div>
	<div class="shadowHome"></div>
</div>
<div class="wrapSubContent">
${self.renderMessages()}
<div class="contentHome">
	<div class="weNeed">
		<div class="formWeNeed" id="poolProductFinder">
			<h3>${_("FF_HOMEPAGE_FORM_We need")}</h3>
			<form method="POST" id="submissionform" onSubmit="return onSubmitCleaner(this)" action="${url("pool_details", protocol="http")}">
			<div class="floatLeft">
				<span>${h.display_currency(h.default_currency())}</span>
				<span class="showToolTipHook"><input type="text" name="amount" class="short tipeIn weNeed" /></span>
				<span style="margin-left:30px">${_("FF_HOMEPAGE_FORM_for")}</span>
			</div>
			<div class="floatLeft" style="width:522px">
				<span class="showToolTipHook"><input type="text" name="title"_default_text="${_("FF_HOME_PAGE_Examples: a weekend away, my sports club...")}" id="home_title" class="weNeed default long" _url="${url(controller="product", action="open_bounce")}" value="${_("FF_HOME_PAGE_Examples: a weekend away, my sports club...")}">
					<div class="verticalTip hideable">
						<div class="arrow"></div>
						<span>${_("FF_HOMEPAGE_FORM_You can also paste a link from any website here.")}</span>
					</div>
				</span>
			<div id="homeurlexpander"></div>
			</div>
			<input type="submit" class="primaryLarge floatRight" value="${_("FF_HOME_PAGE_Get Started")}" />
			</form>
		</div>
		<div class="logoContainer">
			<div class="logoContainerRight">
				<a target="_blank" href="https://trustsealinfo.verisign.com/splash?form_file=fdf/splash.fdf&dn=www.friendfund.com&lang=en"><img src="/static/imgs/veri-sign.png" /></a>
				<img src="/static/imgs/fidor_bank_bw.png" style="margin-left:20px; margin-top:5px ;margin-right:10px" />
				<img src="/static/imgs/mastercard.png" style="margin-left:20px; margin-top:10px ;margin-right:10px" />
				<img src="/static/imgs/visa.png" style="margin-left:20px; margin-top:10px" />
				<img src="/static/imgs/amex.png" style="margin-left:20px; margin-top:10px" />
				<img src="/static/imgs/paypal.png" style="margin-top:10px; margin-left:20px; "  />
			</div>
			<div class="logoContainerLeft">
				<span>${_("FF_HOMEPAGE_BOXES_SEEN IN")}</span>
				<a href="http://eu.techcrunch.com/2011/05/03/angels-club-together-to-invest-in-friendfund/ ">
					<img src="/static/imgs/techcrunch_sml.png" />
				</a>	
				<a href="http://blog.zanox.com/en/zanox/2010/12/10/interview-with-our-publisher-friendfund/ ">	
					<img src="/static/imgs/Zanox_sml.png" />
				</a>
				<a href="http://www.internetworld.de/business-idee/ansicht/7/Madvertise">
					<img src="/static/imgs/IWB_sml.png" />
				</a>
			</div>
			<div class="clear"></div>
		</div>
	</div>
	<div class="featuredPoolsBox">
		<h4>${_("FF_HOMEPAGE_BOXES_Featured Pools")}</h4>
		${self.render_featured_pools(c.get_featured_pools, h.get_language_locale())|n}
		<div class="clear"></div>
	</div>
	<div class="colRightWhite"></div>
	<div class="whatElse">
		<h4>${_("FF_HOMEPAGE_BOXES_Where else can I use friendfund?")}<span>${_("FF_HOMEPAGE_Visit our Partner site to buy stuff toghether.")}
		<div class="hiddenToggler">
			<span class="questionPop">?</span>
			<div class="TTip">${_("FF_HOMEPAGE_friendfund has teamed up with some amazing merchants to give you the best possible group gifting experience.")}</div>
		</div>
		</span></h4>
		${self.renderScroller()|n}
		<div class="clear"></div>
	</div>
	<div class="whatElse">
			<h4>${_("FF_HOMEPAGE_What our users are saying")}</h4>
			${testimonials.render(h.get_language_locale())|n}
		<div class="clear"></div>
	</div>
	<div class="clear"></div>
</div>
</div>




<%def name="renderScroller()" cached="False" cache_key="renderScroller_templ" cache_timeout="86400" cache_type="memory">
	
<%
	list = [#("/static/imgs/integrations/amazon_trans.png", "http://amazon.friendfund.com"),
			("/static/imgs/integrations/caseable_trans.png", "http://www.caseable.com/gallery.php"),
			("/static/imgs/integrations/GAD_trans.png", "http://www.greatamericandays.com/adventure.php?adventure_id=11&price=&category=2&finder=52&imageField.x=9&imageField.y=12"),
			("/static/imgs/integrations/shopperella_trans.png", "http://www.shopperella.de/kinderzimmer-zwei-tuerig/pinolino-kinderzimmer-laura-629/"),
			("/static/imgs/integrations/donanda_trans.png", "http://www.donanda.de/pages/affiliate/1090"),
			("/static/imgs/integrations/fidorbank_trans.png", "https://www.fidor.de/")
		]
%>
	<div class="boxGrayWrap box1" id="merchantslider">
		<div class="boxGray">
		<span class="controller controllerRight"> &laquo; </span>
		<span class="controller controllerLeft"> &raquo; </span>
		<div class="slider">
		<ul class="slider" id="sliderCnt" style="width:${len(list)*219}px" _elem_width="219">
			%for img, href in list:
				<li><a target="_blank" href="${href}"><img src="${img}" /></a></li>
			%endfor
		</ul>
		</div>
			<div class="clear"></div>
		</div>
	</div>
</%def>


<%def name="render_featured_pools(get_featured_pools, lang)" cached="True" cache_key="render_featured_pools_${lang}" cache_timeout="60" cache_type="memory">
	%for i, pool in enumerate(get_featured_pools()):
		<% locals = {"number_contributors":pool.get_number_of_contributors(), "days_left":pool.get_remaining_days(), "admin_name":pool.admin.name} %>
	<div class="homeboxWrap ${i==3 and 'omega' or ''}">
   
		<div class="homebox">
			<img src="${pool.get_product_display_picture("FF_POOLS")}" width="190px" height="150px" />
			<h5 style="min-height:36px;"><a href="${url("get_pool", pool_url = pool.p_url)}">${pool.title}</a></h5>
			<span class="homebox">${_("FF_HOMEPAGE_BOXES_created by %(admin_name)s")%locals}</span>
			<div class="timeCounter">
				<span>${int(pool.funding_progress()*100)}%</span>
				<div class="timeCounterRight" >
					<div class="timeCounterLeft" style="width:${int(pool.funding_progress()*100)}%"> </div>
				</div>
				<div class="clear"></div>
			</div>
			
			<div class="boxContributors">
				<span class="upper">${widgets.renderPoolInfoContributors(locals)|n}</span>
				<span class="middot">&middot;</span>
				<span class="upper">${widgets.renderPoolInfoDaysLeft(locals)|n}</span>
			</div>
			<div class="fbHolder">
				%for pu in pool.get_random_n_invitees(5):
					<img src="${pu.get_profile_pic("PROFILE_S")}" alt="${pu.name}" height="30px" width="30px"/>
				%endfor
				<div class="clear"></div>
			</div>
		</div>
    
	</div>
	
	%endfor
</%def>