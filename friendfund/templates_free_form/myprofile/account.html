<%inherit file="../layout.html"/>
<%namespace name="common" file="common.html"/>
<%def name="title()">Account Settings</%def>
<%def name="page_reloader()">page_reloader = function(){window.location.reload();};</%def>
<%def name="scripts()">
	<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
	<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=friendfund"></script>
</%def>


<%def name="onloadscripts()">
	dojo.query(".btnDef", "myProfile").onclick(function(evt){
		var elem = findParent(evt.target, "btnDef"),  network = dojo.attr(elem, "_network");
		dojo.query(".hideable:not(.hidden)", "myProfile").addClass("hidden");
		dojo.query(".hideable.networkDefaultAccount"+network).removeClass("hidden");
		dojo.query(".btnDef.active", "myProfile").removeClass("active");
		dojo.addClass(elem, "active");
		document.accountForm.is_default.value = network;
	});
	
	
	
	parseDefaultsInputs("myProfile");
	parseSelectables("myProfile", "showToolTipHook");
	parseSimpleEditables("myProfile");
</%def>


<div class="wrapSubHeader">
	<div class="subHeader">
		<div class="userProfile">
			<div class="subUserProfile">
				<h2 class="padBtm">${_("FF_ACCOUNT_Account Settings")}</h2>
			</div>
			${common.render_tabs("account")|n}
		<div class="clear"></div>
		</div>
	</div>
</div>
<div class="wrapSubContent">
<div class="content">
<div class="colRight"></div>
<div class="colLeft" id="myProfile">
	<h4>${_("FF_ACCOUNT_Default Account")}
		####<span class="link floatRight">${_("FF_ACCOUNT_Edit")}</span>
	</h4>
	<form action="${url(controller="myprofile", action="save")}" method="post" id="accountForm" name="accountForm" enctype="multipart/form-data" onsubmit="onSubmitCleaner(this);">
		<input type="hidden" name="is_default" id="is_default" value="${c.values.get("is_default")}"/>
		<div class="subHeading"></div>
		<div class="borderBottom">
			<div class="greyInsideFullWidth">
				<div class="subSpacer bold">
				<div class="first">
					&nbsp;
				</div>
			   ${_("FF_ACCOUNT_ Choose how you want to be identified on this site.")}
				</div>
				<div class="first">
					<span>${_("FF_ACCOUNT_Default Account")}</span>
				</div>
				<span class="btnDef btnDefFb ${c.values.get("is_default") == 'facebook' and 'active' or ''}" _network="facebook" >Facebook</span>
				<span class="btnDef btnDefTw ${c.values.get("is_default") == 'twitter' and 'active' or ''}" _network="twitter" >Twitter</span>
				<span class="btnDef btnDefMail ${c.values.get("is_default") == 'email' and 'active' or ''}" _network="email" >Mail</span>
			</div>
		</div>
			
			
		<div class="hideable ${c.values.get("is_default") != 'email' and 'hidden' or ''} networkDefaultAccountemail">
			<div class="borderBottom showToolTipHook ${'name' in c.errors and 'error' or ''}">
				<div class="tip">
					<div class="arrow"></div>
					%if 'name' in c.errors:
						<span>${c.errors['name']}</span>
					%else:
						<span>${_("FF_ACCOUNT_NAME_Tip goes here")}</span>
					%endif
				</div>
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Your Name")}</span>
				</div>
					<input type="text" class="default" value="${c.values.get('name') or _("FF_ACCOUNT_Write your name here...")}" class="" _default_text="${_("FF_ACCOUNT_Write your name here...")}" name="name"/>
				</div>
			</div>
			
			<div class="borderBottom showToolTipHook ${'email' in c.errors and 'error' or ''}">
				<div class="tip">
					<div class="arrow"></div>
					%if 'email' in c.errors:
						<span>${c.errors['email']}</span>
					%else:
						<span>${_("FF_ACCOUNT_EMAIL_Tip goes here")}</span>
					%endif
				</div>
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Email Address")}</span>
				</div>
					<input type="text" class="default" value="${c.values.get('email') or _("FF_ACCOUNT_Write your email here...")}" class="" _default_text="${_("FF_ACCOUNT_Write your email here...")}" name="email"/>
				</div>
			</div>
			
			<div class="colRightWhite"></div>
	   
			  <div class="borderBottom noBorder">
					<div class="first">
						<span>&nbsp;</span>
					</div>
					<div class="userProfileBox">
					%if 'email' in c.myprofiles:
						<img width="60px" height="60px" src="${c.myprofiles['email'].get_profile_pic("PROFILE_S")}"/>
					%else:
						<img width="60px" height="60px" src="${h.get_user_picture(None, "PROFILE_M")}"/>
					%endif
					</div>
					<div class="choose">
						<input type="file" value="Choose file" name="profile_pic" style="border:medium none;" />
						<p>${_("FF_UPLOADPICTUREPOPUP_JPEG, PNG or GIF. MAX FILE SIZE: 5 MB")}</p>
					</div>
			  </div>
		</div>
			  
			  
			  
		<div class="hideable ${c.values.get("is_default") != 'twitter' and 'hidden' or ''}  networkDefaultAccounttwitter">
		%if 'twitter' in c.myprofiles:
			<div class="borderBottom">
				<div class="tip">
					<div class="arrow"></div>
						<span>${_("FF_ACCOUNT_NAME_Tip goes here")}</span>
				</div>
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Your Name")}</span>
				</div>
					<div class="aligner bold"> ${c.myprofiles['twitter'].name}</div>
				</div>
			</div>
			<div class="borderBottom">
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Picture")}</span>
				</div>
					<img src="${c.myprofiles['twitter'].get_profile_pic("PROFILE_S")}"/>
				</div>
			</div>
		
		%else:
			<div class="borderBottom noBorder">
				 <div class="first">
					<span>&nbsp;</span>
				 </div>
				 <div class="floatLeft" style="padding:20px 0">
					 <p>${_("FF_ACCOUNT_You're not connected with Twitter")}</p>
					 <a onclick="twInit('/')" class="twitterBtn floatLeft" title="${_("FF_LOGIN_Log in with Twitter")}">
						<span>${_("FF_LOGIN_Log in with Twitter")}</span>
					</a>
				</div>
			</div>
		%endif
		</div>
		
		<div class="hideable ${c.values.get("is_default") != 'facebook' and 'hidden' or ''}  networkDefaultAccountfacebook">
		%if 'facebook' in c.myprofiles:
			<div class="borderBottom">
				<div class="tip">
					<div class="arrow"></div>
						<span>${_("FF_ACCOUNT_NAME_Tip goes here")}</span>
				</div>
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Your Name")}</span>
				</div>
					<div class="aligner bold"> ${c.myprofiles['facebook'].name} </div>
				</div>
			</div>
			<div class="borderBottom">
				<div class="greyInsideFullWidth">
				<div class="first">
					<span>${_("FF_ACCOUNT_Picture")}</span>
				</div>
					<img src="${c.myprofiles['facebook'].get_profile_pic("PROFILE_S")}"/>
				</div>
			</div>
		
		%else:
			<div class="borderBottom noBorder">
				<div class="first">
					<span>&nbsp;</span>
				</div>
				<div class="floatLeft" style="padding:20px 0">
					<p>${_("FF_ACCOUNT_You're not connected with Facebook")}</p>
					<a onclick="fbLogin()" class="facebookBtn floatLeft" title="${_("FF_LOGIN_Log in with Facebook")}">
						<span>${_("FF_LOGIN_Log in with Facebook")}</span>
					</a>
				</div>
			</div>
		%endif
		</div>
		<span class="primaryButton floatLeft" onclick="onSubmitCleaner(document.accountForm);document.accountForm.submit()" style="margin:10px 0 0 160px">${_("FF_ACCOUNT_Save Changes")}</span>
	</form>
</div>
<div class="clear"></div>
</div>
</div>
